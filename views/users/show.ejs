<% include ../partials/header %>

<div class="container">

  <div class="row">
    <div class="col-sm-6">
      <div class="card">
        <img class="card-img-top" src="<%= user.selfie %>" alt="user profile image">
        <div class="card-body">
          <h5 class="card-title"><%= user.firstName + " " + user.lastName %></h5>
          <a class="btn btn-primary" href="mailto:<%= user.email %>"><%= user.email %></a>
          <p class="card-text">
            Some quick example text to build on the card title and make up the bulk of the  card's content.Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error quasi similique architecto ad modi sunt quaerat possimus, officiis quos. Voluptatibus repellendus exercitationem, id saepe sunt consectetur non quam sapiente assumenda.

            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Error quasi similique architecto ad modi sunt quaerat possimus, officiis quos. Voluptatibus repellendus exercitationem, id saepe sunt consectetur non quam sapiente assumenda.
          </p>
          <a href="#" class="btn btn-primary">Go somewhere</a>
        </div>
      </div>
    </div>

  	<div class="col-sm-6">
  		<h3><%= user.username %>'s publications:</h3>
  		<ul>
  		<% publications.forEach(function(publication) { %>
  			<li><a href="/publications/<%= publication.id %>"><%= publication.name %></a></li>
  		<% }); %>
  		</ul>
  	</div>
  </div>
  
  
  <div class="card text-center">
    <div class="card-header">
      Howntown Google Location
    </div>
    <div class="card-body">
      <h5 class="card-title">Where I come from</h5>
      <p class="card-text">this is the place I come from, xxxxxxxx.</p>
    </div>

    <div id="map"></div>

    <div class="card-footer text-muted">
      added by Kangnan
    </div>
  </div>
  
</div>
 
<!--include googlemap script-->
<script>
  function initMap() {
    var lat = <%= user.lat %>;
    var lng = <%= user.lng %>;
    var center = {lat: lat, lng: lng };
    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 8,
        center: center,
        scrollwheel: false
    });    
    var contentString = `
      <strong><%= user.firstName%> <%= user.lastName %><br />
      <%= user.location %></strong>
      <p><%= user.description %></p>
    `
    var infowindow = new google.maps.InfoWindow({
      content: contentString
    });
    var marker = new google.maps.Marker({
        position: center,
        map: map
    });
    marker.addListener('click', function() {
      infowindow.open(map, marker);
    });
  }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAzr_Z5i7A_pW5C9uIcYEXRt4T3J18aJ9k&callback=initMap"></script>

<% include ../partials/footer %>